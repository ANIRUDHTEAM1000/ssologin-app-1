{"ast":null,"code":"import _slicedToArray from\"/Users/g.anirudh/Desktop/POC/JWT-FOOD-FE5/food-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function App(){var _useParams=useParams(),id=_useParams.id;console.log(id);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var limit=3;var count=0;if(localStorage.getItem(\"count\")===null){localStorage.setItem(\"count\",\"\".concat(count));}useEffect(function(){if(typeof id!='undefined'&&id!=null&&id!=\"\"){document.cookie=id;setToken(id);console.log(token);// localStorage.removeItem(\"count\");\nlocalStorage.setItem(\"count\",\"\".concat(0));redirect(\"http://localhost:3000/success\");}else{if(parseInt(localStorage.getItem(\"count\"))<=limit){localStorage.setItem(\"count\",\"\".concat(parseInt(localStorage.getItem(\"count\"))+1));redirect(\"http://localhost:2000/cookie/\".concat(window.location.href.replace(window.location.protocol+\"//\",\"\")));}else if(parseInt(localStorage.getItem(\"count\"))>3){localStorage.setItem(\"count\",\"\".concat(0));redirect(\"http://localhost:3000/error\");}}},[]);var redirect=function redirect(url){console.log(url);window.location.replace(url);};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[\"Token is \",token]})});}export default App;","map":{"version":3,"names":["useEffect","useState","useParams","App","id","console","log","token","setToken","limit","count","localStorage","getItem","setItem","document","cookie","redirect","parseInt","window","location","href","replace","protocol","url"],"sources":["/Users/g.anirudh/Desktop/POC/JWT-FOOD-FE5/food-app/src/App.js"],"sourcesContent":["import './App.css';\nimport { useEffect, useState } from \"react\"\nimport { useParams } from \"react-router-dom\";\n\nfunction App() {\n\n  let { id } = useParams();\n  console.log(id);\n  const [token, setToken] = useState(\"\");\n  const limit = 3;\n  let count = 0;\n  if(localStorage.getItem(\"count\")===null){\n    localStorage.setItem(\"count\",`${count}`);\n  }\n  useEffect(() => {\n    if (typeof (id) != 'undefined' && id != null && id != \"\" ) {\n      document.cookie = id;\n      setToken(id);\n      console.log(token);\n      // localStorage.removeItem(\"count\");\n      localStorage.setItem(\"count\",`${0}`);\n      redirect(\"http://localhost:3000/success\")\n    } else {\n      if(parseInt(localStorage.getItem(\"count\"))<=limit){\n        localStorage.setItem(\"count\",`${parseInt(localStorage.getItem(\"count\"))+1}`)\n        redirect(`http://localhost:2000/cookie/${window.location.href.replace(window.location.protocol+\"//\",\"\")}`);\n      }\n      else if(parseInt(localStorage.getItem(\"count\"))>3){\n        localStorage.setItem(\"count\",`${0}`);\n        redirect(\"http://localhost:3000/error\")\n      }\n    }\n  }, [])\n\n  const redirect = url => {\n    console.log(url);\n    window.location.replace(url);\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        {\"Token is \"}\n        {token}\n      </header>\n    </div>\n  );\n\n}\n\nexport default App;\n"],"mappings":"wIAAA,MAAO,WAAP,CACA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,SAAT,KAA0B,kBAA1B,C,wFAEA,QAASC,IAAT,EAAe,CAEb,eAAaD,SAAS,EAAtB,CAAME,EAAN,YAAMA,EAAN,CACAC,OAAO,CAACC,GAAR,CAAYF,EAAZ,EACA,cAA0BH,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACA,GAAMC,MAAK,CAAG,CAAd,CACA,GAAIC,MAAK,CAAG,CAAZ,CACA,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,IAAgC,IAAnC,CAAwC,CACtCD,YAAY,CAACE,OAAb,CAAqB,OAArB,WAAgCH,KAAhC,GACD,CACDV,SAAS,CAAC,UAAM,CACd,GAAI,MAAQI,GAAR,EAAe,WAAf,EAA8BA,EAAE,EAAI,IAApC,EAA4CA,EAAE,EAAI,EAAtD,CAA2D,CACzDU,QAAQ,CAACC,MAAT,CAAkBX,EAAlB,CACAI,QAAQ,CAACJ,EAAD,CAAR,CACAC,OAAO,CAACC,GAAR,CAAYC,KAAZ,EACA;AACAI,YAAY,CAACE,OAAb,CAAqB,OAArB,WAAgC,CAAhC,GACAG,QAAQ,CAAC,+BAAD,CAAR,CACD,CAPD,IAOO,CACL,GAAGC,QAAQ,CAACN,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAR,EAAyCH,KAA5C,CAAkD,CAChDE,YAAY,CAACE,OAAb,CAAqB,OAArB,WAAgCI,QAAQ,CAACN,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAR,CAAwC,CAAxE,GACAI,QAAQ,wCAAiCE,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,OAArB,CAA6BH,MAAM,CAACC,QAAP,CAAgBG,QAAhB,CAAyB,IAAtD,CAA2D,EAA3D,CAAjC,EAAR,CACD,CAHD,IAIK,IAAGL,QAAQ,CAACN,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAR,CAAwC,CAA3C,CAA6C,CAChDD,YAAY,CAACE,OAAb,CAAqB,OAArB,WAAgC,CAAhC,GACAG,QAAQ,CAAC,6BAAD,CAAR,CACD,CACF,CACF,CAlBQ,CAkBN,EAlBM,CAAT,CAoBA,GAAMA,SAAQ,CAAG,QAAXA,SAAW,CAAAO,GAAG,CAAI,CACtBlB,OAAO,CAACC,GAAR,CAAYiB,GAAZ,EACAL,MAAM,CAACC,QAAP,CAAgBE,OAAhB,CAAwBE,GAAxB,EACD,CAHD,CAKA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,gBAAQ,SAAS,CAAC,YAAlB,WACG,WADH,CAEGhB,KAFH,GADF,EADF,CASD,CAED,cAAeJ,IAAf"},"metadata":{},"sourceType":"module"}